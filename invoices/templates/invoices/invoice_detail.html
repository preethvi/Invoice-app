{% extends "base.html" %}
{% block content %}
<div class="container mt-5" style="max-width: 900px;">

  <div class="card shadow-lg rounded-4 p-4 bg-white">
    <h2 class="mb-4 text-primary fw-bold text-center">Invoice #{{ invoice.id }}</h2>

    <div class="row mb-3">
      <div class="col-md-4">
        <p><strong class="text-secondary">Date</strong></p>
        <p>{{ invoice.date }}</p>
      </div>
      <div class="col-md-4">
        <p><strong class="text-secondary">Client</strong></p>
        <p>{{ invoice.client.name }}</p>
      </div>
      <div class="col-md-4">
        <p><strong class="text-secondary">Company</strong></p>
        <p>{{ invoice.company.name }}</p>
      </div>
    </div>

    <h4 class="text-secondary fw-semibold mb-3 border-bottom pb-2">Items</h4>
    <table class="table table-striped table-bordered rounded shadow-sm align-middle">
      <thead class="table-dark text-white">
        <tr>
          <th>Product</th>
          <th class="text-center">Quantity</th>
          <th class="text-center">Price</th>
          <th class="text-end">Cost</th>
        </tr>
      </thead>
      <tbody>
        {% for item in invoice.items.all %}
        <tr>
          <td>{{ item.product.name }}</td>
          <td class="text-center">{{ item.quantity }}</td>
          <td class="text-center">${{ item.price }}</td>
          <td class="text-end fw-semibold">${{ item.get_cost }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="d-flex justify-content-end flex-column align-items-end mt-4">
      <p class="mb-1"><strong>Tax:</strong> ${{ invoice.tax }}</p>
      <h4 class="fw-bold">Total: ${{ invoice.total }}</h4>
    </div>

    <div class="mt-4 d-flex justify-content-between">
      <a class="btn btn-outline-secondary btn-lg shadow-sm" href="{% url 'download_invoice_pdf' invoice.id %}">
        <i class="bi bi-file-earmark-pdf me-2"></i> Download PDF
      </a>
      <a class="btn btn-primary btn-lg shadow" href="{% url 'dashboard' %}">Back to Dashboard</a>
    </div>
  </div>
</div>
{% endblock %}
